<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Yamanote Line Immersive Guide</title>
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data: https://images.unsplash.com https://media.timeout.com https://upload.wikimedia.org https://cdn.pixabay.com; media-src 'self' https://madewithonlyai.com https://cdn.pixabay.com; style-src 'self' 'unsafe-inline'; font-src 'self' https://fonts.gstatic.com; script-src 'self'; connect-src 'self';">
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@500;700&display=swap"
    rel="stylesheet">
</head>
<body>
  <div id="app" class="app">
    <header class="top-bar">
      <div class="top-bar__group">
        <button id="mapToggle" class="ghost-button" aria-expanded="false">Station List</button>
        <div class="search-wrapper">
          <label class="sr-only" for="stationSearch">Search stations</label>
          <input id="stationSearch" list="stationList" type="search" placeholder="Search stations‚Ä¶" autocomplete="off">
          <datalist id="stationList"></datalist>
          <button id="jumpButton" class="ghost-button">Go</button>
        </div>
      </div>
      <div class="top-actions">
        <div class="volume-control" role="group" aria-label="Master volume">
          <span class="volume-control__icon" aria-hidden="true">üîä</span>
          <label class="sr-only" for="volumeSlider">Announcement volume</label>
          <input
            id="volumeSlider"
            class="volume-control__slider"
            type="range"
            min="0"
            max="100"
            step="1"
            value="80"
          >
        </div>
        <button id="rideModeButton" class="ghost-button" aria-pressed="true">Ride Mode On</button>
        <button id="ambientToggle" class="ghost-button" aria-pressed="false">Ambient Off</button>
        <button id="darkModeToggle" class="ghost-button" aria-pressed="false">üåô Dark Mode</button>
        <button id="announcementsToggle" class="ghost-button" aria-pressed="true">Announcements On</button>
      </div>
    </header>

    <main id="stationViewport" class="station-viewport" tabindex="0">
      <div id="stationBackground" class="station-background" role="img" aria-live="polite"></div>
      <div class="station-overlay"></div>
      <div id="prevStationPreview" class="station-preview station-preview--previous" aria-hidden="true"></div>
      <div id="nextStationPreview" class="station-preview station-preview--next" aria-hidden="true"></div>

      <section class="station-content">
        <div class="station-name">
          <span id="stationNameJp" class="station-name__jp" lang="ja"></span>
          <span id="stationNameEn" class="station-name__en"></span>
        </div>
        <article class="station-info">
          <h2 class="station-info__heading">About this station</h2>
          <p id="stationAbout"></p>
        </article>
        <section class="transfer-lines" aria-label="Transfer lines">
          <h3 class="transfer-lines__heading">Transfers</h3>
          <div id="transferLines" class="transfer-lines__list"></div>
        </section>
      </section>

      <div class="station-direction" aria-hidden="true">
        <div class="station-direction__rail">
          <div class="station-direction__item station-direction__item--prev">
            <div class="station-direction__text">
              <span class="station-direction__label">From</span>
              <span id="directionPrevName" class="station-direction__name"></span>
            </div>
          </div>
          <div class="station-direction__indicator" aria-hidden="true">
            <span class="station-direction__line"></span>
            <span class="station-direction__shuttle" aria-hidden="true"></span>
          </div>
          <div class="station-direction__item station-direction__item--next">
            <div class="station-direction__text">
              <span class="station-direction__label">Toward</span>
              <span id="directionNextName" class="station-direction__name"></span>
            </div>
          </div>
        </div>
      </div>

      <div class="audio-pill" role="region" aria-label="Station announcements">
        <div class="audio-pill__controls">
          <button id="prevStation" class="pill-button" aria-label="Skip to previous station">‚èÆ</button>
          <button id="playPause" class="pill-button" aria-pressed="false" aria-label="Play or pause announcement">‚ñ∂</button>
          <button id="skipStation" class="pill-button" aria-label="Skip to next station">‚è≠</button>
          <button id="audioMapButton" class="pill-button pill-button--map" aria-expanded="false" aria-label="Open station list">
            <span class="pill-button__icon" aria-hidden="true">
              <svg viewBox="0 0 32 32" focusable="false" role="presentation">
                <circle cx="16" cy="16" r="14" stroke-width="2"></circle>
                <circle cx="16" cy="16" r="4" stroke-width="2"></circle>
              </svg>
            </span>
            <span class="pill-button__label">Station List</span>
          </button>
        </div>
        <div class="audio-pill__meta">
          <span id="currentTrackLabel" class="track-label"></span>
        </div>
      </div>
    </main>

    <aside id="mapOverlay" class="map-overlay" aria-hidden="true">
      <div class="map-overlay__scrim" data-close="true"></div>
      <div class="map-overlay__panel" role="dialog" aria-labelledby="mapHeading">
        <header class="map-overlay__header">
          <h2 id="mapHeading">Yamanote Loop</h2>
          <button id="closeMap" class="ghost-button map-overlay__close" aria-label="Close station list">√ó</button>
        </header>
        <div class="map-overlay__line" id="mapLine" role="list"></div>
      </div>
    </aside>
  </div>

  <audio id="announcementAudio" preload="auto" crossorigin="anonymous"></audio>
  <audio id="jingleAudio" preload="auto" crossorigin="anonymous"></audio>
  <audio id="ambientAudio" preload="auto" loop crossorigin="anonymous" src="https://cdn.pixabay.com/audio/2022/03/15/audio_54c178aeb5.mp3"></audio>

  <script src="main.js" type="module"></script>
</body>
</html>
